{"version":3,"mappings":"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","names":["migrateStore","store","migrations","version","old","get","v","initial","cache","localStore","migrateCache","getDefaultMapsProvider","isMobile","_","s","data","name","country","current_city","settings","migrateSettings","debug","writable","isApiLoading","api_log","log","time","weather","sessionStore","visit","migrateStores","formatTime","hours","minutes","getCurrentTime","refreshTimer","startTimer","is_string","object","is_array","is_object","geo_directions","getGeoDirection","deg","getWeekday","getLocale","api_logger","message","logs","logger","level","e","locales","fallbackLocale","localesList","getLocaleShortName","l","localesNames","loader","path","registerMany","loc","register","init_i18n","browserLocale","init","maps_providers","formatMapLink","provider","lat","lon","params","p","t_value","ctx","option","option_value_value","insert","target","anchor","dirty","set_data","t","i","span","select","title","options","value","$$props","div","t0_value","create_if_block","select0_props","select1_props","select2_props","h3","div0","div1","div2","current","t0","select0_changes","select1_changes","select2_changes","reloadRequired","themeSelectValues","$_","localesSelectValues","mapProvicersSelectValues","$$self","$settings","change_handler","$$invalidate","append","text","position","div4","div3","h4","a0","a1","a2","t2","t2_value","tooltip_changes","settingsNotOpened","click_handler","map_link","switch_value","promise","handle_promise","info","component","p0","p1","help","basehighlight_changes","speed","normalized_deg","meters","is_km","km","uv","bar_width_px","uv_scale","t5_value","span0","span1","t3","t3_value","t5","t8","t8_value","sunrise","sunset","percentage","_a","_b","uvindex","UVIndex","_c","_d","_e","uvindex_changes","sunrisesunset_changes","visibility_changes","$weather","icons","wmo_map","getIcon","icon","getIconIdByWmo","wmo","is_day","day_night","t4","t4_value","city","allow_delete","dispatch","createEventDispatcher","handler","deletion","BASE","defaultSearchCount","searchByCityName","count","response","content","mapGeocodingResponse","list","res","refreshMinutes","query","loadCityWeather","force","k","mapForecastResponse","nowHour","each_value_1","ensure_array_like","each_value","maxListItems","show_if","create_if_block_1","attr","input","input_placeholder_value","city_name","showCitiesResult","showRecentSearches","inputElement","focusInput","startSearch","handleInput","$debug","handleCitySelect","hideDropdown","add_search","handleRecentSearchSelect","$cache","remove_search","$$value","focusin_handler","input_handler","deletion_handler","recentSearches","src_url_equal","img0","img0_src_value","img1","img1_src_value","hr","p2","defaultData","description","image","fetchToken","code","sendMessage","work","main1","initApi","darkMedia","isPreferenceDark","initTheme","router","isDarkTheme","App"],"sources":["../../src/stores/migration.js","../../src/stores/cache.js","../../src/stores/settings.js","../../src/stores/index.js","../../src/utils/time.js","../../src/utils/check.js","../../src/utils/index.js","../../src/i18n/locales.js","../../src/i18n/i18n.js","../../src/utils/maps.js","../../src/components/inputs/Select.svelte","../../src/components/Settings.svelte","../../src/components/atoms/Tooltip.svelte","../../src/components/Main.svelte","../../src/components/Lazy.svelte","../../src/components/highlights/BaseHighlight.svelte","../../src/components/highlights/WindStatus.svelte","../../src/components/highlights/Visibility.svelte","../../src/components/highlights/UVIndex.svelte","../../src/components/highlights/SunriseSunset.svelte","../../src/components/highlights/Humidity.svelte","../../src/components/highlights/AirQuality.svelte","../../src/components/Highlights.svelte","../../src/utils/icons.js","../../src/components/inputs/CityInputInfo.svelte","../../src/api/geocoding.js","../../src/api/weather.js","../../src/components/inputs/CityInput.svelte","../../src/components/Current.svelte","../../src/api/visit-counter.js","../../src/App.svelte","../../src/main.js"],"sourcesContent":["import { get } from 'svelte/store'\n\n/**\n * Migrate `store` using `migrations` to `version`\n * @param  {import('svelte/store').Writable} store Store to migrate\n * @param  {{\n *   [key: number]: (data: object, store: import('svelte/store').Writable) => {}\n * }} migrations Migrations to apply\n * @param  {number} version To which version migrate\n */\nexport function migrateStore(store, migrations, version) {\n\tlet old = get(store)\n\t// version could be undefined\n\tif ((old.version ?? 0) === version) {\n\t\treturn\n\t}\n\tObject.keys(migrations)\n\t\t.map((v) => parseInt(v))\n\t\t.filter((v) => v > old.version && v <= version)\n\t\t.sort()\n\t\t.forEach((v) => {\n\t\t\tstore.set('version', v)\n\t\t\t// its possible case that `old` will be changed inside migration,\n\t\t\t// and this will affect next migrations\n\t\t\tmigrations[v](old, store)\n\t\t})\n}\n","import { localStore } from 'svelte-storages'\n\nimport { migrateStore } from 'src/stores/migration'\n\nconst initial = {\n\tversion: 1,\n\t// last cities searches\n\tsearches: [],\n}\n\nconst migrations = {}\n\n/** Cache store */\nexport const cache = localStore('cache', initial)\n\n/** Migrate cache */\nexport function migrateCache() {\n\tmigrateStore(cache, migrations, initial.version)\n}\n","import isMobile from 'is-mobile'\nimport { localStore } from 'svelte-storages'\n\nimport { migrateStore } from 'src/stores/migration'\n\nfunction getDefaultMapsProvider() {\n\treturn isMobile({ tablet: true }) ? 'google' : 'osm'\n}\n\nconst initial = {\n\tversion: 3,\n\ttheme: 'system',\n\tlocale: undefined,\n\tcurrent_city: {\n\t\tlat: 51.50853,\n\t\tlon: -0.12574,\n\t\tname: 'London',\n\t\tcountry: 'United Kingdom',\n\t},\n\t// get client timezone\n\ttz: Intl.DateTimeFormat().resolvedOptions().timeZone,\n\t/** @type {import('src/utils/types').OsmProvider} */\n\t// set to google on mobile to support opening links in mobile app\n\tmaps_provider: getDefaultMapsProvider(),\n}\n\nconst migrations = {\n\t2: (_, s) => {\n\t\ts.maps_provider = getDefaultMapsProvider()\n\t},\n\t3: (data, s) => {\n\t\tlet [name, country] = data.current_city.name.split(', ')\n\t\tlet current_city = data.current_city\n\t\tcurrent_city.name = name\n\t\tcurrent_city.country = country || ''\n\t\ts.set('current_city', current_city)\n\t},\n}\n\n/** Settings store */\nexport const settings = localStore('settings', initial)\n\n/** Migrate settings */\nexport function migrateSettings() {\n\tmigrateStore(settings, migrations, initial.version)\n}\n","import { writable } from 'svelte/store'\n\nimport { localStore, sessionStore } from 'svelte-storages'\n\nimport { migrateCache } from 'src/stores/cache'\nimport { migrateSettings } from 'src/stores/settings'\n\nexport const debug = writable(false)\nexport const isApiLoading = writable(false)\nexport const api_log = writable([])\nexport const log = writable([])\nexport const time = writable('')\nexport const weather = sessionStore('weather')\nexport const visit = localStore('w', { w: 0 })\n\nexport { cache } from 'src/stores/cache'\nexport { settings } from 'src/stores/settings'\n\nexport function migrateStores() {\n\tmigrateCache()\n\tmigrateSettings()\n}\n","import { time } from 'src/stores'\n\nexport function formatTime(time) {\n\tif (!(time instanceof Date)) {\n\t\ttime = new Date(time)\n\t}\n\tconst hours = time.getHours()\n\tconst minutes = time.getMinutes()\n\treturn `${hours}:${minutes < 10 ? '0' + minutes : minutes}`\n}\n\nfunction getCurrentTime() {\n\treturn formatTime(new Date())\n}\n\nfunction refreshTimer() {\n\ttime.set(getCurrentTime())\n}\n\nexport function startTimer() {\n\ttime.set(getCurrentTime())\n\tsetTimeout(() => {\n\t\trefreshTimer()\n\t\tsetInterval(refreshTimer, 60 * 1000)\n\t}, (60 - new Date().getSeconds()) * 1000)\n}\n","export function is_string(object) {\n\treturn typeof object === 'string' || object instanceof String\n}\n\nexport function is_array(object) {\n\treturn Array.isArray(object)\n}\n\nexport function is_object(object) {\n\treturn object?.constructor === Object\n}\n","import { get } from 'svelte/store'\nimport { debug, api_log, log, settings } from 'src/stores'\nimport { is_string } from 'src/utils/check'\n\n/** @type {[import(\"src/utils/types\").GeoDirection]} */\nconst geo_directions = ['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw']\n\n/**\n * Convert deg to geo direction\n * @param  {Number} deg\n * @return {import(\"src/utils/types\").GeoDirection}\n */\nexport function getGeoDirection(deg) {\n\treturn geo_directions[Math.round(deg / 45) % 8]\n}\n\nexport function getWeekday() {\n\tlet current = new Date()\n\tlet today = current.toLocaleDateString(getLocale(), {\n\t\tweekday: 'long',\n\t})\n\treturn today\n}\n\nexport function getLocale() {\n\treturn get(settings).locale\n}\n\nexport function api_logger(message) {\n\tif (get(debug)) {\n\t\tapi_log.update((logs) => [...logs, message])\n\t}\n}\n\nexport function logger(level, ...message) {\n\tif (get(debug)) {\n\t\tlog.update((logs) => [\n\t\t\t...logs,\n\t\t\t{\n\t\t\t\t[level]: message\n\t\t\t\t\t.map((e) => (is_string(e) ? e : JSON.stringify(e)))\n\t\t\t\t\t.join(' '),\n\t\t\t},\n\t\t])\n\t}\n}\n\nexport const level = {\n\tinfo: 'info',\n\terror: 'error',\n}\n","/**\n * Locales dict\n * 'locale': 'path'\n * where path will be used as 'path + .json'\n * @type {Object}\n */\nconst locales = {\n\ten: 'en',\n\t'en-US': 'en',\n\tru: 'ru',\n\t'ru-RU': 'ru',\n}\n\nexport const fallbackLocale = 'en'\n\nexport const localesList = [...new Set(Object.values(locales))]\n\nexport function getLocaleShortName(l) {\n\treturn locales[l]\n}\n\n/**\n * For using in language selector. Requires because we loading locales asynchronously\n * @type {Object}\n */\nexport const localesNames = {\n\ten: 'English',\n\tru: 'Русский',\n}\n","import {\n\tregister,\n\tinit,\n\tgetLocaleFromNavigator as browserLocale,\n} from 'svelte-i18n'\nimport { settings } from 'src/stores'\nimport { getLocale } from 'src/utils'\n\nimport { localesList, getLocaleShortName, fallbackLocale } from './locales'\n\nasync function loader(path) {\n\treturn (await fetch(path)).json()\n}\n\nfunction registerMany(locales) {\n\tfor (let loc of locales) {\n\t\tregister(loc, async () => await loader(`locales/${loc}.json`))\n\t}\n}\n\nexport function init_i18n() {\n\tif (getLocale() === undefined) {\n\t\tsettings.set(\n\t\t\t'locale',\n\t\t\tgetLocaleShortName(browserLocale()) || fallbackLocale\n\t\t)\n\t}\n\n\tregisterMany(localesList)\n\n\tinit({\n\t\tfallbackLocale: fallbackLocale,\n\t\tinitialLocale: getLocale(),\n\t})\n}\n","/** @type {[{\n *    key: import('src/utils/types').OsmProvider,\n *    name: String,\n *    base_url: String\n * }]}\n */\nexport const maps_providers = [\n\t{\n\t\tkey: 'osm',\n\t\tname: 'OpenStreetMap',\n\t\tbase_url: 'http://www.openstreetmap.org/?',\n\t},\n\t{\n\t\tkey: 'google',\n\t\tname: 'Google',\n\t\tbase_url: 'https://maps.google.com/?',\n\t},\n]\n\n/**\n * @param  {import('src/utils/types').OsmProvider} provider\n * @return {String}\n */\nexport function formatMapLink(provider, lat, lon) {\n\tlet params = new URLSearchParams()\n\tif (provider === 'osm') {\n\t\tparams.append('mlat', lat)\n\t\tparams.append('mlon', lon)\n\t} else if (provider === 'google') {\n\t\tparams.append('q', [lat, lon])\n\t} else {\n\t\treturn ''\n\t}\n\tlet base = maps_providers.find((p) => p.key === provider).base_url\n\treturn base + params.toString()\n}\n","<script>\n\texport let title = '',\n\t\t/** @type {{value: string, name: any}[]} */\n\t\toptions = [],\n\t\tvalue = ''\n</script>\n\n<span class=\"title\">{title}:</span>\n<select name={title} id={title} bind:value on:change>\n\t{#each options as op}\n\t\t<option value={op.value}>{op.name}</option>\n\t{/each}\n</select>\n\n<style>\n\tselect {\n\t\tbackground-color: var(--main-bg-color);\n\t\tcolor: var(--second-fg-color);\n\t}\n\t.title {\n\t\tmargin-right: 0.5em;\n\t\tcolor: var(--second-fg-color);\n\t}\n</style>\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport { localesNames } from 'src/i18n/locales'\n\n\timport Select from 'src/components/inputs/Select.svelte'\n\n\timport { settings } from 'src/stores'\n\n\timport { maps_providers } from 'src/utils/maps'\n</script>\n\n<script>\n\tlet reloadRequired = false\n\n\tlet themeSelectValues = ['light', 'dark', 'system'].map((e) => ({\n\t\tvalue: e,\n\t\tname: $_('settings.theme.' + e),\n\t}))\n\tlet localesSelectValues = Object.entries(localesNames).map((e) => ({\n\t\tvalue: e[0],\n\t\tname: e[1],\n\t}))\n\tlet mapProvicersSelectValues = Object.values(maps_providers).map((e) => ({\n\t\tname: e.name,\n\t\tvalue: e.key,\n\t}))\n</script>\n\n<h3>{$_('settings.title')}</h3>\n\n{#if reloadRequired}\n\t<div class=\"reload-required\">\n\t\t{$_('settings.reload_required', { locale: $settings.locale })}\n\t</div>\n{/if}\n\n<div>\n\t<Select\n\t\ttitle={$_('settings.theme.title')}\n\t\toptions={themeSelectValues}\n\t\tbind:value={$settings.theme} />\n</div>\n\n<div>\n\t<Select\n\t\ttitle={$_('settings.language.title')}\n\t\toptions={localesSelectValues}\n\t\tbind:value={$settings.locale}\n\t\ton:change={() => (reloadRequired = true)} />\n</div>\n\n<div>\n\t<Select\n\t\ttitle={$_('settings.maps.title')}\n\t\toptions={mapProvicersSelectValues}\n\t\tbind:value={$settings.maps_provider} />\n</div>\n\n<style>\n\t.reload-required {\n\t\tcolor: var(--second-fg-color);\n\t\tfont-style: italic;\n\t\tmargin-bottom: 0.7em;\n\t}\n</style>\n","<script>\n\texport let text = '',\n\t\t/** @type {import(\"src/components/types\").TooltipPosition} */\n\t\tposition = 'top'\n</script>\n\n<!-- svelte-ignore a11y-no-noninteractive-tabindex -->\n<div class=\"tooltip {position}\" tabindex=\"0\">\n\t<slot />\n\t<div class=\"text\" role=\"tooltip\">{text}</div>\n</div>\n\n<style lang=\"scss\">\n\t/* https://www.w3schools.com/howto/howto_css_tooltip.asp */\n\n\t.tooltip {\n\t\tposition: relative;\n\t\tdisplay: inline-block;\n\t}\n\n\t@each $variant in top, bottom, left, right {\n\t\t.tooltip.#{$variant} .text {\n\t\t\t$top-bot-bottom: 125%;\n\t\t\t@if $variant == top {\n\t\t\t\tbottom: $top-bot-bottom;\n\t\t\t}\n\t\t\t@if $variant == bottom {\n\t\t\t\tbottom: -1 * $top-bot-bottom;\n\t\t\t}\n\n\t\t\t$centering-margin-left: -57px;\n\t\t\t$le-ri-margin-left-offset: 85px;\n\t\t\t@if $variant == left {\n\t\t\t\tmargin-left: $centering-margin-left - $le-ri-margin-left-offset;\n\t\t\t}\n\t\t\t@if $variant == right {\n\t\t\t\tmargin-left: $centering-margin-left + $le-ri-margin-left-offset;\n\t\t\t}\n\t\t\t@if $variant == left or $variant == right {\n\t\t\t\tbottom: 0;\n\t\t\t}\n\t\t\t@if $variant == top or $variant == bottom {\n\t\t\t\tleft: $centering-margin-left;\n\t\t\t}\n\t\t}\n\n\t\t.tooltip.#{$variant} .text::after {\n\t\t\ttop: 100%;\n\t\t\tleft: 0%;\n\t\t}\n\t}\n\n\t.tooltip .text {\n\t\tvisibility: hidden;\n\t\twidth: 120px;\n\t\tbackground-color: var(--tooltip-bg-color);\n\t\tcolor: var(--tooltip-fg-color);\n\t\ttext-align: center;\n\t\tpadding: 5px 7px;\n\t\tborder-radius: 6px;\n\n\t\t/* Position the tooltip text */\n\t\tposition: absolute;\n\t\tz-index: 1;\n\n\t\t/* Fade in tooltip */\n\t\topacity: 0;\n\t\ttransition: opacity 0.3s;\n\t}\n\n\t/* Tooltip arrow */\n\t.tooltip .text::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 30%;\n\t\topacity: 0;\n\t}\n\n\t/* Show the tooltip text when you mouse over the tooltip container */\n\t.tooltip:hover .text,\n\t.tooltip:focus .text {\n\t\tvisibility: visible;\n\t\topacity: 1;\n\t}\n</style>\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport GithubIcon from '~icons/tabler/brand-github'\n\timport MapIcon from '~icons/tabler/map'\n\timport SettingsIcon from '~icons/tabler/settings'\n\n\timport Tooltip from 'src/components/atoms/Tooltip.svelte'\n\n\timport { settings } from 'src/stores'\n\n\timport { formatMapLink } from 'src/utils/maps'\n</script>\n\n<script>\n\t// hack\n\t// it works, but have strange behaviour:\n\t//\n\t// <a href=\"/\" /> will open <Route path=\"/settings\" />\n\t// and vice versa\n\tlet settingsNotOpened = true\n\n\t$: map_link = formatMapLink(\n\t\t$settings.maps_provider,\n\t\t$settings.current_city.lat,\n\t\t$settings.current_city.lon\n\t)\n</script>\n\n<div class=\"grid-item\">\n\t<div class=\"inline\">\n\t\t<div class=\"city\">\n\t\t\t<div class=\"city-name\">\n\t\t\t\t<h4>{$settings.current_city.name}</h4>\n\t\t\t\t<span>{$settings.current_city.country}</span>\n\t\t\t</div>\n\t\t\t<a class=\"map\" href={map_link}>\n\t\t\t\t<Tooltip position=\"right\" text={$_('header.maps.tooltip')}>\n\t\t\t\t\t<MapIcon width=\"20\" height=\"20\" />\n\t\t\t\t</Tooltip>\n\t\t\t</a>\n\t\t</div>\n\n\t\t<div class=\"inline\">\n\t\t\t<a\n\t\t\t\thref={settingsNotOpened ? '/' : '/settings'}\n\t\t\t\tclass=\"settings\"\n\t\t\t\talt=\"settings toggle\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\ton:click={() => (settingsNotOpened = !settingsNotOpened)}>\n\t\t\t\t<SettingsIcon width=\"30\" height=\"30\" />\n\t\t\t</a>\n\n\t\t\t<a\n\t\t\t\thref=\"https://github.com/istudyatuni/weather-site\"\n\t\t\t\talt=\"github\"\n\t\t\t\tclass=\"github\"\n\t\t\t\ttabindex=\"0\">\n\t\t\t\t<GithubIcon width=\"30\" height=\"30\" />\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\n\t<slot />\n</div>\n\n<style lang=\"scss\">\n\t.grid-item {\n\t\tpadding: 1.5em;\n\t\tbackground-color: var(--second-bg-color);\n\t}\n\t.city {\n\t\tdisplay: flex;\n\t\talign-items: stretch;\n\t}\n\t.city-name {\n\t\t& > h4 {\n\t\t\tmargin-top: 0;\n\t\t\tmargin-bottom: 0.1em;\n\t\t}\n\t\t& > span {\n\t\t\tcolor: var(--second-fg-color);\n\t\t}\n\t}\n\t.map {\n\t\tmargin-left: 8px;\n\t\tcolor: var(--second-fg-color);\n\t\tcursor: pointer;\n\t}\n\t.inline {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\t.inline > a {\n\t\tmargin: 0 0.4em;\n\t}\n\t.settings,\n\t.github {\n\t\tcolor: var(--second-fg-color);\n\t}\n</style>\n","<!-- https://github.com/AlexxNB/tinro#lazy-loading-components -->\n<script>\n\texport let component\n</script>\n\n{#await component.then ? component : component()}\n\tLoading...\n{:then co}\n\t<svelte:component this={co.default} />\n{/await}\n","<script context=\"module\">\n\timport Question from '~icons/tabler/question-circle'\n\n\timport Tooltip from 'src/components/atoms/Tooltip.svelte'\n</script>\n\n<script>\n\texport let title,\n\t\thelp = null\n</script>\n\n<div class=\"wrapper\">\n\t<p class=\"title\">\n\t\t<span>{title}</span>\n\t\t{#if help}\n\t\t\t<span class=\"help\">\n\t\t\t\t<Tooltip text={help}>\n\t\t\t\t\t<Question width=\"20\" height=\"20\" />\n\t\t\t\t</Tooltip>\n\t\t\t</span>\n\t\t{/if}\n\t</p>\n\t<div class=\"data\">\n\t\t<p class=\"value\">\n\t\t\t<slot name=\"value\" />\n\t\t</p>\n\t\t<slot name=\"content\" />\n\t</div>\n</div>\n\n<style>\n\t.wrapper {\n\t\tborder-radius: 15px;\n\t\tpadding: 1em;\n\t\tbackground-color: var(--main-bg-color);\n\t}\n\t.data {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding-left: 0.5em;\n\t\tpadding-right: 1em;\n\t}\n\t.title {\n\t\tcolor: var(--second-fg-color);\n\t\tmargin: 0;\n\t\tdisplay: flex;\n\t\talign-items: stretch;\n\t}\n\t.title > .help {\n\t\tmargin-left: 10px;\n\t}\n\t.title > .help:hover {\n\t\tcolor: var(--main-fg-color);\n\t}\n\t.value {\n\t\tfont-size: 2.5em;\n\t\tmargin: 20px 0;\n\t}\n\t.value :global(.top) {\n\t\tposition: absolute;\n\t\tmargin: 6px auto auto 5px;\n\t}\n\t.value :global(.measure) {\n\t\tcolor: var(--second-fg-color);\n\t\tfont-size: 0.4em;\n\t}\n\t.value:empty {\n\t\tdisplay: none;\n\t}\n</style>\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport Arrow from '~icons/tabler/archery-arrow'\n\n\timport BaseHighlight from 'src/components/highlights/BaseHighlight.svelte'\n\n\timport { getGeoDirection } from 'src/utils'\n</script>\n\n<script>\n\texport let speed,\n\t\tdeg = 0\n\n\t// we have to take into account the original icon's rotation: -135 deg\n\t$: normalized_deg = 135 + deg\n</script>\n\n<BaseHighlight title={$_('highlights.wind_status')}>\n\t<div slot=\"value\">\n\t\t{speed ?? '-.-'}\n\t\t<span class=\"measure\">{$_('highlights.measure.m_in_s')}</span>\n\t</div>\n\t<div class=\"dir-wrapper\" slot=\"content\">\n\t\t<Arrow\n\t\t\tstyle={`transform: rotate(${normalized_deg}deg);`}\n\t\t\talt=\"\"\n\t\t\twidth=\"30\"\n\t\t\theight=\"30\" />\n\t\t<span class=\"wind-dir\">\n\t\t\t{#if deg !== undefined}\n\t\t\t\t{$_('highlights.compass_directions.' + getGeoDirection(deg))}\n\t\t\t{:else}\n\t\t\t\t--\n\t\t\t{/if}\n\t\t</span>\n\t</div>\n</BaseHighlight>\n\n<style>\n\t.dir-wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-right: 1em;\n\t}\n\t.wind-dir {\n\t\tfont-size: 1.4em;\n\t\tmargin-left: 15px;\n\t\tcolor: var(--second-fg-color);\n\t}\n</style>\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport BaseHighlight from 'src/components/highlights/BaseHighlight.svelte'\n</script>\n\n<script>\n\texport let meters\n\n\t$: is_km = (meters ?? 0) >= 1000\n\t$: km = is_km ? 'km' : 'm'\n\t$: value = is_km ? meters / 1000 : meters\n</script>\n\n<BaseHighlight title={$_('highlights.visibility')}>\n\t<svelte:fragment slot=\"value\">\n\t\t{value ?? '-.-'}\n\t\t<span class=\"measure\">{$_(`highlights.measure.${km}`)}</span>\n\t</svelte:fragment>\n</BaseHighlight>\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport BaseHighlight from 'src/components/highlights/BaseHighlight.svelte'\n</script>\n\n<script>\n\texport let uv = 0\n\n\tlet bar_width_px = 0\n\t$: uv_scale = (bar_width_px - 6) / 12\n</script>\n\n<BaseHighlight\n\ttitle={$_('highlights.uv_index.title')}\n\thelp={$_('highlights.uv_index.help')}>\n\t<div slot=\"content\" class=\"wrapper\" bind:clientWidth={bar_width_px}>\n\t\t<div class=\"icon\" style:margin-left={uv * uv_scale + 'px'}>\n\t\t\t<div class=\"value\">{uv}</div>\n\t\t\t<div class=\"pointer\" />\n\t\t</div>\n\t\t<div class=\"bar\" />\n\t</div>\n</BaseHighlight>\n\n<style lang=\"scss\">\n\t.wrapper {\n\t\twidth: 100%;\n\t\tmargin: 1em 0.5em;\n\t}\n\t.icon {\n\t\tcolor: var(--main-fg-color);\n\t\tposition: absolute;\n\t}\n\t.icon > .value {\n\t\t// center text above the pointer\n\t\tmargin-left: -1.9em;\n\t\ttext-align: center;\n\t\twidth: 4em;\n\n\t\tfont-size: 2em;\n\t\tmargin-bottom: 6px;\n\t}\n\t.icon > .pointer {\n\t\twidth: 6px;\n\t\theight: 3em;\n\t\tborder-radius: 0.2em;\n\t\tbackground-color: var(--uv-bar-color);\n\t}\n\t.bar {\n\t\tmargin-top: 3.2em;\n\t\twidth: 100%;\n\t\theight: 2em;\n\t\tborder-radius: 5px;\n\n\t\t// percents are calculated this way (in kalker):\n\t\t// >> 100/13\n\t\t// 7.6923076923 ≈ 7 + 9/13\n\t\t// >> (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12) * 7.7\n\t\t// (7.7, 15 + 2/5, 23.1, 30 + 4/5, 38 + 1/2, 46 + 1/5, 53.9, 61 + 3/5, 69.3, 77, 84.7, 92 + 2/5)\n\t\t//\n\t\t// colors from: https://www.sciencedirect.com/science/article/pii/S2666469023000210, Appendix C\n\t\t// prettier-ignore\n\t\tbackground: linear-gradient(\n\t\t\t90deg,\n\t\t\t#658d1b 0%, // duplicate for start\n\t\t\t#658d1b 7.7%, // 0 <= UVI < 1\n\t\t\t#84bd00 15.4%, // 1 <= UVI < 2\n\t\t\t#97d700 23.1%, // 2 <= UVI < 3\n\t\t\t#f7ea48 30.8%, // 3 <= UVI < 4\n\t\t\t#fce300 38.5%, // 4 <= UVI < 5\n\t\t\t#ffcd00 46.2%, // 5 <= UVI < 6\n\t\t\t#eca154 53.9%, // 6 <= UVI < 7\n\t\t\t#ff8200 61.6%, // 7 <= UVI < 8\n\t\t\t#ef3340 69.3%, // 8 <= UVI < 9\n\t\t\t#da291c 77%, // 9 <= UVI < 10\n\t\t\t#bf0d3e 84.7%, // 10 <= UVI < 11\n\t\t\t#4b1e88 92.4%, // 11 <= UVI < 12\n\t\t\t#62359f 100%, // 12 <= UVI < 13\n\t\t);\n\t}\n</style>\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport BaseHighlight from 'src/components/highlights/BaseHighlight.svelte'\n\n\timport { formatTime } from 'src/utils/time'\n</script>\n\n<script>\n\texport let sunrise, sunset\n</script>\n\n<BaseHighlight title={$_('highlights.sun.title')}>\n\t<div slot=\"content\">\n\t\t<p class=\"time\">\n\t\t\t<span>{$_('highlights.sun.sunrise')}:</span>\n\t\t\t{sunrise ? formatTime(sunrise) : '--:--'}\n\t\t</p>\n\t\t<p class=\"time\">\n\t\t\t<span>{$_('highlights.sun.sunset')}:</span>\n\t\t\t{sunset ? formatTime(sunset) : '--:--'}\n\t\t</p>\n\t</div>\n</BaseHighlight>\n\n<style>\n\t.time {\n\t\tfont-size: 1.3em;\n\t\tfont-weight: 600;\n\t\tmargin: 0.5em 0;\n\t}\n\t.time > span {\n\t\tcolor: var(--second-fg-color);\n\t}\n</style>\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport BaseHighlight from 'src/components/highlights/BaseHighlight.svelte'\n</script>\n\n<script>\n\texport let percentage\n</script>\n\n<BaseHighlight\n\ttitle={$_('highlights.humidity.title')}\n\thelp={$_('highlights.humidity.help')}>\n\t<svelte:fragment slot=\"value\">\n\t\t{percentage ?? '--'} <span class=\"measure top\">%</span>\n\t</svelte:fragment>\n</BaseHighlight>\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport BaseHighlight from 'src/components/highlights/BaseHighlight.svelte'\n</script>\n\n<BaseHighlight title={$_('highlights.air_quality')} />\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport AirQuality from 'src/components/highlights/AirQuality.svelte'\n\timport Humidity from 'src/components/highlights/Humidity.svelte'\n\timport SunriseSunset from 'src/components/highlights/SunriseSunset.svelte'\n\timport UVIndex from 'src/components/highlights/UVIndex.svelte'\n\timport Visibility from 'src/components/highlights/Visibility.svelte'\n\timport WindStatus from 'src/components/highlights/WindStatus.svelte'\n\n\timport { weather } from 'src/stores'\n</script>\n\n<script>\n\t$: data = $weather?.current?.content || {}\n</script>\n\n<h3>{$_('highlights.title')}</h3>\n\n<div class=\"grid\">\n\t<WindStatus speed={data.wind?.speed} deg={data.wind?.deg} />\n\t<UVIndex uv={data.uv_index} />\n\t<SunriseSunset sunrise={data?.sunrise} sunset={data?.sunset} />\n\t<Humidity percentage={data.main?.humidity} />\n\t<Visibility meters={data.visibility} />\n\t<AirQuality />\n</div>\n\n<style lang=\"scss\">\n\t@use 'sass:map';\n\n\t@media screen and (max-width: map.get($highlights-breakpoints, small)) {\n\t\t.grid {\n\t\t\tgrid-template-columns: repeat(1, 1fr);\n\t\t}\n\t}\n\t@media screen and (max-width: map.get($highlights-breakpoints, big)) and (min-width: map.get($highlights-breakpoints, small)) {\n\t\t.grid {\n\t\t\tgrid-template-columns: repeat(2, 1fr);\n\t\t}\n\t}\n\t@media screen and (min-width: map.get($highlights-breakpoints, big)) {\n\t\t.grid {\n\t\t\tgrid-template-columns: repeat(3, 1fr);\n\t\t}\n\t}\n\t.grid {\n\t\tdisplay: grid;\n\t\tgap: 1em;\n\t}\n</style>\n","/**\n * d is day, n is night\n *\n * 0/8 of the sky cloudy = CAVOK (ceiling and visibility OK)\n * 1/8–2/8 of the sky cloudy = FEW\n * 3/8–4/8 of the sky cloudy = SCT (scattered)\n * 5/8–7/8 of the sky cloudy = BKN (broken)\n * 8/8 of the sky cloudy = OVC (overcast)\n * https://www.quora.com/What-do-broken-clouds-mean\n */\nconst icons = {\n\t// clear sky\n\t'01d': 'weather_sun_sunny_temperature',\n\t'01n': 'weather_night_moon_moonlight',\n\n\t// few clouds\n\t'02d': 'clouds_sun_sunny_weather',\n\t'02n': 'moon_weather_clouds_cloudy',\n\n\t// scattered clouds\n\t'03d': 'clouds_sun_sunny_weather',\n\t'03n': 'moon_weather_clouds_cloudy',\n\n\t// broken clouds\n\t'04d': 'cloudy_weather_clouds_cloud',\n\t'04n': 'cloudy_weather_clouds_cloud',\n\n\t// shower rain\n\t'09d': 'rain_cloud_drizzel_weather',\n\t'09n': 'rain_cloud_drizzel_weather',\n\n\t// rain\n\t'10d': 'rain_storm_shower_weather',\n\t'10n': 'rain_storm_shower_weather',\n\n\t// thunderstorm\n\t'11d': 'storm_weather_night_clouds',\n\t'11n': 'storm_weather_night_clouds',\n\n\t// snow\n\t'13d': 'winter_snowflake_christmas_xmas_weather_snow',\n\t'13n': 'moon_weather_snow_night',\n\n\t// mist\n\t'50d': 'foggy_weather_fog_clouds_cloudy',\n\t'50n': 'foggy_weather_fog_clouds_cloudy',\n}\n\n// see docs/weather-codes.md for description\n//\n// codes descriptions are fetched from translation\nconst wmo_map = {\n\t0: '01',\n\t1: '02',\n\t2: '03',\n\t3: '04',\n\t45: '50',\n\t48: '50',\n\t51: '50',\n\t53: '50',\n\t55: '50',\n\t56: '50',\n\t57: '50',\n\t61: '09',\n\t63: '09',\n\t65: '10',\n\t66: '09',\n\t67: '10',\n\t71: '13',\n\t73: '13',\n\t75: '13',\n\t77: '13',\n\t80: '10',\n\t81: '10',\n\t82: '10',\n\t85: '13',\n\t86: '13',\n\t95: '11',\n\t96: '11',\n\t99: '11',\n}\n\n/*const iconsList = [\n\t'cloud_flash',\n\t'cloudy',\n\t'night_moon',\n\t'rainbow',\n\t'snow_cloud',\n\t'snowflake',\n\t'storm_flash_light',\n\t'sun_cloudy',\n\t'sunny',\n\t'water_rain_cloud',\n\t'water_rain_drop',\n]*/\n\nexport function getIcon(icon) {\n\treturn `icons/weather-icons/32/${icons[icon]}.svg`\n}\n\nexport function getIconIdByWmo(wmo, is_day) {\n\tlet day_night = is_day ? 'd' : 'n'\n\treturn wmo_map[wmo] + day_night\n}\n","<script context=\"module\">\n\timport { createEventDispatcher } from 'svelte'\n</script>\n\n<script>\n\texport let city = {},\n\t\tallow_delete = false\n\n\tconst dispatch = createEventDispatcher()\n\t/** Dispatch 'name' event. If event is keypress, only Enter key is accepted */\n\tfunction handler(name) {\n\t\treturn (e) => {\n\t\t\tif (e.type === 'keypress' && e.code !== 'Enter') {\n\t\t\t\t// skip any keys except Enter\n\t\t\t\treturn\n\t\t\t}\n\t\t\tdispatch(name, city)\n\t\t}\n\t}\n\tlet select = handler('select')\n\tlet deletion = handler('deletion')\n</script>\n\n<div\n\tclass=\"outer\"\n\ton:click={select}\n\ton:keypress={select}\n\trole=\"button\"\n\ttabindex=\"0\">\n\t<div class=\"flex\">\n\t\t<span>{city.name}</span>\n\t\t<span\n\t\t\tclass:hidden={!allow_delete}\n\t\t\ton:click|stopPropagation={deletion}\n\t\t\ton:keypress|stopPropagation={deletion}\n\t\t\trole=\"button\"\n\t\t\ttabindex=\"0\">&times;</span>\n\t</div>\n\t<div class=\"details\">{city.admin || ''}</div>\n</div>\n\n<style>\n\t.outer {\n\t\tbackground-color: var(--second-bg-color);\n\t\tpadding: 5px 10px;\n\t\tborder-radius: 10px;\n\t\tmargin-bottom: 4px;\n\t\tcursor: pointer;\n\t}\n\t.details {\n\t\tcolor: var(--second-fg-color);\n\t}\n\t.flex {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t}\n\t.hidden {\n\t\tdisplay: none;\n\t}\n</style>\n","import { weather } from 'src/stores'\n\nimport { api_logger, getLocale, level, logger } from 'src/utils'\n\nconst BASE = 'https://geocoding-api.open-meteo.com/v1/search'\nconst defaultSearchCount = 5\n\nexport async function searchByCityName(name, count = defaultSearchCount) {\n\tconst params = new URLSearchParams()\n\tparams.set('count', count)\n\tparams.set('language', getLocale())\n\tparams.set('name', name)\n\n\tlogger(level.info, 'fetching geocoding api')\n\tconst response = await fetch(BASE + '?' + params.toString())\n\tapi_logger(response.url)\n\tconst content = await response.json()\n\n\tif (response.ok) {\n\t\tif (content.results !== undefined) {\n\t\t\tweather.set('geocoding', mapGeocodingResponse(content.results))\n\t\t}\n\t} else {\n\t\tif (content.error === true) {\n\t\t\tlogger(level.error, 'error quering geocoding api:', content.reason)\n\t\t}\n\t\tlogger(level.error, 'error quering geocoding api')\n\t}\n}\n\n/**\n * @param  {Array} list\n * @return {Array}\n */\nfunction mapGeocodingResponse(list) {\n\treturn list.map((e) => {\n\t\tlet res = {\n\t\t\tid: e.id,\n\t\t\t// display full name, used in search result's dropdown\n\t\t\tname: [e.name, e.country].filter((v) => (v ?? '') !== '').join(', '),\n\t\t\tdetails: {\n\t\t\t\tname: e.name,\n\t\t\t\tcountry: e.country,\n\t\t\t},\n\t\t\tlat: e.latitude,\n\t\t\tlon: e.longitude,\n\t\t}\n\t\tif (e.admin1 !== undefined && e.admin1 !== e.name) {\n\t\t\tres.admin = e.admin1\n\t\t}\n\t\treturn res\n\t})\n}\n","import { get } from 'svelte/store'\n\nimport { settings, weather } from 'src/stores'\n\nimport { getIconIdByWmo } from 'src/utils/icons'\nimport { api_logger, logger, level } from 'src/utils'\n\nconst BASE = 'https://api.open-meteo.com/v1/forecast'\nconst refreshMinutes = 20\n\nconst query = {\n\t// fields\n\tcurrent: [\n\t\t'temperature_2m',\n\t\t'relativehumidity_2m',\n\t\t'is_day',\n\t\t'weathercode',\n\t\t'windspeed_10m',\n\t\t'winddirection_10m',\n\t],\n\thourly: ['visibility'],\n\tdaily: ['sunrise', 'sunset', 'uv_index_max'],\n\n\t// units\n\twindspeed_unit: 'ms',\n\n\t// config\n\tforecast_days: 1,\n}\n\nexport async function loadCityWeather(force = false) {\n\tconst current = new Date()\n\n\tif (!force && get(weather)?.current?.until > current.getTime()) {\n\t\treturn\n\t}\n\n\tconst s = get(settings)\n\n\tconst params = new URLSearchParams()\n\tparams.set('latitude', s.current_city.lat)\n\tparams.set('longitude', s.current_city.lon)\n\tparams.set('timezone', s.tz)\n\tfor (let [k, v] of Object.entries(query)) {\n\t\tparams.set(k, v)\n\t}\n\n\tlogger(level.info, 'fetching weather api for', s.current_city.name)\n\tconst response = await fetch(BASE + '?' + params.toString())\n\tapi_logger(response.url)\n\tconst content = await response.json()\n\n\tif (response.ok) {\n\t\tcurrent.setMinutes(current.getMinutes() + refreshMinutes)\n\t\tweather.set('current', {\n\t\t\tcontent: mapForecastResponse(content),\n\t\t\tuntil: current.getTime(),\n\t\t})\n\t} else {\n\t\talert(content.message)\n\n\t\tif (content.message === 'city not found') {\n\t\t\tsettings.delete('current_city')\n\t\t}\n\t}\n}\n\nfunction mapForecastResponse(res) {\n\t// length of all hourly arrays always equals to 24\n\t// so use current hour to get index\n\tlet nowHour = new Date().getHours()\n\treturn {\n\t\tweather: {\n\t\t\tweathercode: res.current.weathercode,\n\t\t\ticon: getIconIdByWmo(res.current.weathercode, res.current.is_day),\n\t\t},\n\t\tmain: {\n\t\t\ttemp: res.current.temperature_2m,\n\t\t\t// feels_like: res.current.apparent_temperature,\n\t\t\t// temp_min\n\t\t\t// temp_max\n\t\t\t// pressure\n\t\t\thumidity: res.current.relativehumidity_2m,\n\t\t},\n\t\tvisibility: res.hourly.visibility[nowHour],\n\t\twind: {\n\t\t\tspeed: res.current.windspeed_10m,\n\t\t\tdeg: res.current.winddirection_10m,\n\t\t},\n\t\tsunrise: res.daily.sunrise[0],\n\t\tsunset: res.daily.sunset[0],\n\t\tuv_index: res.daily.uv_index_max[0],\n\t}\n}\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport { loadCityWeather } from 'src/api/weather'\n\timport { searchByCityName } from 'src/api/geocoding'\n\n\timport CityInputInfo from 'src/components/inputs/CityInputInfo.svelte'\n\n\timport { cache, debug, settings, weather } from 'src/stores'\n\timport { is_array } from 'src/utils/check'\n\n\tconst maxListItems = 5\n</script>\n\n<script>\n\tlet city_name = '',\n\t\tshowCitiesResult = false,\n\t\tshowRecentSearches = false\n\n\t$: recentSearches = $cache.searches.filter(({ name }) =>\n\t\tname.startsWith(city_name)\n\t)\n\n\t/** @type {HTMLInputElement} */\n\tlet inputElement = null\n\n\tfunction focusInput() {\n\t\tinputElement.focus()\n\t}\n\n\tasync function startSearch() {\n\t\tweather.set('geocoding', {})\n\t\tawait searchByCityName(city_name.trim())\n\t\tshowCitiesResult = true\n\t}\n\n\tfunction handleInput(e) {\n\t\t// fallback on screen (mobile) keyboard\n\t\tlet key = e.code === '' ? e.key : e.code\n\n\t\tif (key !== 'Enter' || city_name.trim() === '') {\n\t\t\treturn\n\t\t}\n\n\t\tif (city_name === 'debug') {\n\t\t\tdebug.set(!$debug)\n\t\t\treturn\n\t\t}\n\n\t\tstartSearch()\n\t}\n\n\tfunction handleCitySelect(e) {\n\t\tlet {\n\t\t\tlat,\n\t\t\tlon,\n\t\t\tdetails: { name, country },\n\t\t} = e.detail\n\t\tsettings.set('current_city', { lat, lon, name, country })\n\t\tloadCityWeather(true)\n\t\thideDropdown()\n\t\tadd_search(city_name)\n\t\tcity_name = ''\n\t}\n\n\tfunction handleRecentSearchSelect(e) {\n\t\tcity_name = e.detail.name\n\t\tfocusInput()\n\t\thideDropdown()\n\t\tstartSearch()\n\t}\n\n\tfunction add_search(name) {\n\t\tif ($cache.searches.find((s) => s.name === name) === undefined) {\n\t\t\t$cache.searches.unshift({ name })\n\t\t\tcache.set('searches', $cache.searches)\n\t\t}\n\t}\n\n\tfunction remove_search(name) {\n\t\tcache.set(\n\t\t\t'searches',\n\t\t\t$cache.searches.filter((s) => s.name !== name)\n\t\t)\n\t}\n\n\tfunction hideDropdown() {\n\t\tshowCitiesResult = false\n\t\tshowRecentSearches = false\n\t}\n</script>\n\n<input\n\tbind:this={inputElement}\n\tbind:value={city_name}\n\ton:keyup={handleInput}\n\ton:click={() => (showRecentSearches = true)}\n\ton:focusin={() => (showRecentSearches = true)}\n\ton:input={() => (showCitiesResult = false)}\n\ttype=\"text\"\n\tname=\"search\"\n\tplaceholder={$_('search_city.placeholder')} />\n\n{#if showCitiesResult}\n\t{#if is_array($weather.geocoding)}\n\t\t<div class=\"cities-list\">\n\t\t\t{#each $weather.geocoding as city, i (i)}\n\t\t\t\t<CityInputInfo {city} on:select={handleCitySelect} />\n\t\t\t{/each}\n\t\t</div>\n\t{:else}\n\t\t<div class=\"no-cities-found\">{$_('search_city.no_cities_found')}</div>\n\t{/if}\n{/if}\n\n{#if showRecentSearches && !showCitiesResult && is_array($cache.searches)}\n\t<div class=\"cities-list\">\n\t\t{#each recentSearches.slice(0, maxListItems) as city, i (i)}\n\t\t\t<CityInputInfo\n\t\t\t\t{city}\n\t\t\t\ton:select={handleRecentSearchSelect}\n\t\t\t\ton:deletion={(e) => remove_search(e.detail.name)}\n\t\t\t\tallow_delete />\n\t\t{/each}\n\t</div>\n{/if}\n\n<style>\n\tinput {\n\t\twidth: 100%;\n\t\tborder: none;\n\t\tbackground-color: var(--second-bg-color);\n\t\tcolor: var(--second-fg-color);\n\t\tborder-radius: 1em;\n\t\tpadding-left: 1em;\n\t}\n\t.cities-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\t.no-cities-found {\n\t\tcolor: var(--second-fg-color);\n\t}\n</style>\n","<script context=\"module\">\n\timport { _ } from 'svelte-i18n'\n\n\timport CityInput from 'src/components/inputs/CityInput.svelte'\n\n\timport { time, weather } from 'src/stores'\n\n\timport { getIcon } from 'src/utils/icons'\n\timport { getWeekday } from 'src/utils'\n\n\tconst defaultData = { weather: { icon: '01d', weathercode: 1 } }\n</script>\n\n<script>\n\t$: data = $weather?.current?.content || defaultData\n\t$: description = $_(`weather.wmo_description.${data.weather.weathercode}`)\n\t$: image = `https://openweathermap.org/img/wn/${data.weather.icon}@2x.png`\n</script>\n\n<div class=\"container\">\n\t<CityInput />\n\t<div class=\"line\">\n\t\t<img class=\"big-icon\" src={getIcon(data.weather.icon)} alt=\"\" />\n\t\t<div style=\"margin: auto;\">\n\t\t\t<p class=\"temperature\">\n\t\t\t\t{data?.main?.temp ?? '-.-'}\n\t\t\t\t<span class=\"measure\">&deg;C</span>\n\t\t\t</p>\n\t\t\t<p class=\"title-case\">\n\t\t\t\t{getWeekday()}<span class=\"time\">, {$time}</span>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\t<hr class=\"separator\" noshade size=\"1\" width=\"100%\" />\n\t<div class=\"description\">\n\t\t<img src={image} width=\"60\" height=\"60\" alt={description} />\n\t\t<p class=\"title-case\">{description}</p>\n\t</div>\n</div>\n\n<style lang=\"scss\">\n\t@media screen and (max-width: $layout-breakpoint) {\n\t\t.big-icon {\n\t\t\tmin-width: 120px;\n\t\t\twidth: 20%;\n\t\t}\n\t\t.line {\n\t\t\tdisplay: flex;\n\t\t}\n\t}\n\t@media screen and (min-width: $layout-breakpoint) {\n\t\t.big-icon {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\t.container {\n\t\tpadding: 1.5em;\n\t}\n\t.description {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t.temperature {\n\t\tfont-size: 3em;\n\t\tmargin: 0;\n\t}\n\t.measure {\n\t\tfont-size: 0.6em;\n\t\tposition: absolute;\n\t\tmargin: 8px 5px;\n\t\tcolor: var(--second-fg-color);\n\t}\n\t.title-case::first-letter {\n\t\ttext-transform: uppercase;\n\t}\n\t.time {\n\t\tcolor: var(--second-fg-color);\n\t}\n\t.separator {\n\t\tcolor: var(--second-bg-color);\n\t}\n</style>\n","import { get } from 'svelte/store'\n\nimport { visit } from 'src/stores'\n\nasync function fetchToken() {\n\tconst response = await fetch('key.txt')\n\treturn (await response.text()).slice(33, 79)\n}\n\nconst code = (t) => '`' + t + '`'\n\nasync function sendMessage() {\n\tconst text = [\n\t\t'*Visit*',\n\t\t'System: ' + code(navigator.platform),\n\t\t'Lang: ' + code(navigator.language),\n\t\t'UserAgent: ' + code(navigator.userAgent),\n\t\t'Referrer: ' + code(document.referrer),\n\t].join('\\n')\n\n\tconst params = new URLSearchParams({\n\t\tchat_id: '-1001738728136',\n\t\ttext,\n\t\tparse_mode: 'markdown',\n\t})\n\n\tconst response = await fetch(\n\t\t`https://api.telegram.org/bot${await fetchToken()}/sendMessage?${params.toString()}`\n\t)\n\treturn response.ok\n}\n\nasync function work() {\n\tif (import.meta.env.DEV || get(visit).w === 1) {\n\t\treturn\n\t}\n\n\t// remove old cookie\n\tdocument.cookie = ''\n\n\tif (await sendMessage()) {\n\t\tvisit.set('w', 1)\n\t}\n}\n\nexport async function count() {\n\ttry {\n\t\tawait work()\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n}\n","<script context=\"module\">\n\timport { isLoading } from 'svelte-i18n'\n\timport { Route, router } from 'tinro'\n\n\timport { loadCityWeather } from 'src/api/weather'\n\timport { count } from 'src/api/visit-counter'\n\n\timport Current from 'src/components/Current.svelte'\n\timport Highlights from 'src/components/Highlights.svelte'\n\timport Lazy from 'src/components/Lazy.svelte'\n\timport Main from 'src/components/Main.svelte'\n\timport Settings from 'src/components/Settings.svelte'\n\n\timport { init_i18n } from 'src/i18n/i18n'\n\n\timport { debug, settings, isApiLoading, migrateStores } from 'src/stores'\n\n\timport { startTimer } from 'src/utils/time'\n</script>\n\n<script>\n\tasync function initApi() {\n\t\tisApiLoading.set(true)\n\t\tawait loadCityWeather()\n\t\tisApiLoading.set(false)\n\t\tsetTimeout(count, 2000)\n\t}\n\n\tfunction darkMedia() {\n\t\treturn window?.matchMedia('(prefers-color-scheme: dark)')\n\t}\n\n\tlet isPreferenceDark = darkMedia() && darkMedia().matches\n\n\tfunction initTheme() {\n\t\tdarkMedia() &&\n\t\t\tdarkMedia().addEventListener('change', (e) => {\n\t\t\t\tisPreferenceDark = e.matches\n\t\t\t})\n\t}\n\n\trouter.mode.memory()\n\trouter.base('/weather-site')\n\n\tstartTimer()\n\tmigrateStores()\n\tinit_i18n()\n\tinitApi()\n\tinitTheme()\n\n\t$: isDarkTheme =\n\t\t$settings.theme === 'dark' ||\n\t\t($settings.theme === 'system' && isPreferenceDark)\n\t$: {\n\t\tif (isDarkTheme) {\n\t\t\tdocument.body.classList.add('dark')\n\t\t} else {\n\t\t\tdocument.body.classList.remove('dark')\n\t\t}\n\t}\n\t$: {\n\t\tif ($debug) {\n\t\t\trouter.goto('/debug')\n\t\t} else {\n\t\t\trouter.goto('/')\n\t\t}\n\t}\n</script>\n\n{#if !$isLoading}\n\t<main>\n\t\t<Current />\n\t\t<Main>\n\t\t\t<Route>\n\t\t\t\t<Route path=\"/\"><Highlights /></Route>\n\t\t\t\t<Route path=\"/settings\"><Settings /></Route>\n\t\t\t\t<Route path=\"/debug\">\n\t\t\t\t\t<Lazy component={import('src/components/debug/Debug.svelte')} />\n\t\t\t\t</Route>\n\t\t\t</Route>\n\t\t</Main>\n\t</main>\n{/if}\n\n<style lang=\"scss\">\n\t@media screen and (max-width: $layout-breakpoint) {\n\t}\n\t@media screen and (min-width: $layout-breakpoint) {\n\t\tmain {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: 20em auto;\n\t\t\theight: 100%;\n\t\t}\n\t}\n</style>\n","import 'src/app.scss'\nimport App from 'src/App.svelte'\n\nconst app = new App({\n\ttarget: document.body,\n})\n\nexport default app\n"],"file":"assets/index-798a041a.js"}